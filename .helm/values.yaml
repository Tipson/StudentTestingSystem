# Assessment API
assessmentApi:
  environment: "Staging"
  replicaCount: 2
  service:
    name: "assessment-api"
    portHttp: 8080
  ingress:
    enabled: true
    host: assessment.lmscloud.ru
  auth:
    issuer: "https://keycloak.lmscloud.ru/realms/lms"
    clientId: "assessment-api"
  database:
    host: "postgres-postgresql.lms.svc.cluster.local"
    port: "5432"
    name: "assessment"
  redis:
    host: "redis-master.lms.svc.cluster.local"
    port: "6379"
  rabbitmq:
    host: "rabbitmq.lms.svc.cluster.local"
  grading:
    useMessageBus: "true"
    serviceUrl: "http://grading-api:8080"
  limits:
    memoryRequests: "256Mi"
    memoryLimits: "512Mi"
    cpuRequests: "100m"
    cpuLimits: "500m"
  gemini:
    baseUrl: "https://gemini-proxy.tipson-510.workers.dev/"
    model: "gemini-2.5-flash"
    temperature: "0.3"
    maxOutputTokens: "2048"

# Media API
mediaApi:
  environment: "Staging"
  replicaCount: 1
  service:
    name: "media-api"
    portHttp: 8080
  ingress:
    enabled: true
    host: media.lmscloud.ru
  auth:
    issuer: "https://keycloak.lmscloud.ru/realms/lms"
    clientId: "media-api"
  database:
    host: "postgres-postgresql.lms.svc.cluster.local"
    port: "5432"
    name: "media"
  s3:
    serviceUrl: "s3.lmscloud.ru"
    port: "80"
    defaultBucketName: "assessment"
    withSsl: false
  redis:
    host: "redis-master.lms.svc.cluster.local"
    port: "6379"
  limits:
    memoryRequests: "256Mi"
    memoryLimits: "512Mi"
    cpuRequests: "100m"
    cpuLimits: "500m"

# Identity API
identityApi:
  environment: "Staging"
  replicaCount: 2
  service:
    name: "identity-api"
    portHttp: 8080
  ingress:
    enabled: true
    host: identity.lmscloud.ru
  auth:
    issuer: "https://keycloak.lmscloud.ru/realms/lms"
    clientId: "identity-api"
  database:
    host: "postgres-postgresql.lms.svc.cluster.local"
    port: "5432"
    name: "identity"
  redis:
    host: "redis-master.lms.svc.cluster.local"
    port: "6379"
  limits:
    memoryRequests: "256Mi"
    memoryLimits: "512Mi"
    cpuRequests: "100m"
    cpuLimits: "500m"

# Grading API
gradingApi:
  environment: "Production"
  replicaCount: 2
  service:
    name: "grading-api"
    portHttp: 8080
  auth:
    issuer: "https://keycloak.lmscloud.ru/realms/lms"
  rabbitmq:
    host: "rabbitmq.lms.svc.cluster.local"
  limits:
    memoryRequests: "512Mi"
    memoryLimits: "1Gi"
    cpuRequests: "200m"
    cpuLimits: "1000m"
  gemini:
    baseUrl: "https://gemini-proxy.tipson-510.workers.dev/"
    model: "gemini-2.5-flash"
    temperature: "0.3"
    maxOutputTokens: "2048"

# Frontend
frontend:
  environment: "Staging"
  replicaCount: 2
  service:
    name: "frontend"
    portHttp: 3000
  ingress:
    enabled: true
    host: lmscloud.ru
  api:
    assessmentUrl: "https://assessment.lmscloud.ru"
    mediaUrl: "https://media.lmscloud.ru"
    identityUrl: "https://identity.lmscloud.ru"
  keycloak:
    url: "https://keycloak.lmscloud.ru"
    realm: "lms"
    clientId: "swagger"
    redirectPath: "/swagger/oauth2-redirect"
    scope: "openid profile email"
    refreshIntervalMs: "60000"
    refreshLeewayMs: "120000"
  limits:
    memoryRequests: "128Mi"
    memoryLimits: "256Mi"
    cpuRequests: "50m"
    cpuLimits: "200m"

# Prometheus
prometheus:
  enabled: true
  replicaCount: 1
  service:
    name: "prometheus"
    port: 9090
  retention: "15d"
  scrapeInterval: "15s"
  ingress:
    enabled: true
    host: prometheus.lmscloud.ru
  limits:
    memoryRequests: "512Mi"
    memoryLimits: "1Gi"
    cpuRequests: "200m"
    cpuLimits: "500m"

# Grafana
grafana:
  enabled: true
  replicaCount: 1
  service:
    name: "grafana"
    port: 3000
  adminUser: "admin"
  ingress:
    enabled: true
    host: grafana.lmscloud.ru
  limits:
    memoryRequests: "256Mi"
    memoryLimits: "512Mi"
    cpuRequests: "100m"
    cpuLimits: "500m"
